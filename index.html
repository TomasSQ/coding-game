<html>
	<head>
		<script
	src="http://code.jquery.com/jquery-3.2.1.min.js"
	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	crossorigin="anonymous"></script>
		<link rel="stylesheet" href="css/codemirror.css">
		<link rel="stylesheet" href="css/pastel-on-dark.css">
		<link rel="stylesheet" href="css/tetris.css">
		<link rel="stylesheet" href="css/tsp.css">
		<link rel="stylesheet" href="css/coding-game.css">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans|Patua+One" rel="stylesheet">
		<link rel="stylesheet" href="http://fontawesome.io/assets/font-awesome/css/font-awesome.css">
		<script type="text/javascript" src="js/codemirror.js"></script>
		<script type="text/javascript" src="js/show-hint.js"></script>
		<script type="text/javascript" src="js/javascript-hint.js"></script>
		<script type="text/javascript" src="js/javascript.js"></script>
		<script type="text/javascript" src="js/markdown.js"></script>
		<style>
			body {
				margin: 0;
				padding: 0;
				width: 100vw;
				font-family: 'Open Sans', sans-serif;
			}
		</style>
	</head>
	<body>
		<div class="left-side">
			<div class="game-info">
				<h1><span><i class="fa fa-code"></i></span> DexCoding</h1>
				<div class="game-score">
					<i class="fa fa-thermometer"></i>
					<div class="time">
						<small class="item-label">Time</small> <span class="item-value">-</span>
					</div>
					<div class="score">
						<small class="item-label">score</small> <span class="item-value">-</span>
					</div>
				</div>
			</div>
			<div class="canvas">
				<div data-game="tsp">
					<div class="character player"></div>
					<div class="character power"></div>
				</div>
				<div data-game="tetris">
				</div>
			</div>
		</div><div class="right-side">
			<div class="game-buttons">
				<button><i class="fa fa-cogs"></i> run code</button>
			</div>
			<textarea id="code">
const distance = (p, p0) => { return Math.sqrt(Math.pow(p.x - p0.x, 2) + Math.pow(p.y - p0.y, 2))}

let p =[
	{x:10, y:300},
	lib.power.coord()
]
if (!lib.vars.position)
	lib.vars.position = 0
if (lib.vars.position < p.length - 1 && distance(p[lib.vars.position], lib.player.coord()) < 20) {
	lib.vars.position++
}


if (!lib.power.coord()) {
	let min
    lib.targets.forEach( t => {
		if (!min || distance(min, lib.player.coord()) > distance(t.coord(), lib.player.coord()))
			min = t.coord()
	})
	lib.player.moveTo(min)
} else {
	lib.player.moveTo(p[lib.vars.position])
}


</textarea>
		</div>
		<div class="left-side">
			<h2>Documentation</h2>
			<p>Use lib.player.moveTo({x:100, y:199}) to the main loop conduct the player to the coordinate (100, 199)</p>
			<p>lib.targets[i].coord() and lib.player.coord() gives the coordinates of the i-target and player, respectively</p>
		</div><div class="right-side">
			<h2>Test Cases</h2>
			<ul>
				<li data-test="1" class="selected">1</li>
				<li data-test="2">2</li>
				<li data-test="3">3</li>
				<li data-test="4">4</li>
			</ul>
		</div>
		<script>
			window.lib = {}
		</script>
		<script src="js/tsp-scenarios.js"></script>
		<script src="js/tsp.js"></script>
		<script src="js/tetris.js"></script>
		<script src="js/main_loop.js"></script>
		<script>
			(function() {
				$('textarea').keydown(function (e) {
					if (e.ctrlKey && e.keyCode == 13) {
						// Ctrl-Enter pressed
						$('button').click();
					}
				});

				$('body').on('click', '.overlay, video', function() {
					$('.overlay, video').fadeOut();
					if ($('[data-test].selected').next().length) {
						$('[data-test].selected').next().click()
					} else {
						init()
					}
				});

				$('[data-test]').click(function() {
					$(this).addClass('selected').siblings().removeClass('selected')
					init()
				})
			})()
		</script>
		<script type="text/javascript" src="js/code-editor.js"></script>
		<video class="video-win" src="https://media.giphy.com/media/UomtITuXq8kvK/giphy.mp4" poster="https://media.giphy.com/media/UomtITuXq8kvK/giphy_s.gif" autoplay="" loop="" playsinline="" style="width: 60%; height: 60%;"></video>
		<video class="video-loose" src="https://media.giphy.com/media/xT5LMpBWU96Yivdfeo/giphy.mp4" poster="https://media.giphy.com/media/xT5LMpBWU96Yivdfeo/giphy.mp4" autoplay="" loop="" playsinline="" style="width: 60%; height: 60%;"></video>
		<div class="overlay">click to close</div>
	</body>
</html>
